schema: '2.0'
stages:
  data_ingestion:
    cmd: python trashnet/pipeline/training_pipeline.py data_ingestion
    deps:
    - path: config.yaml
      hash: md5
      md5: 583b467daa92c4d360de508a4bba1336
      size: 2125
    - path: trashnet/pipeline/training_pipeline.py
      hash: md5
      md5: 62c8fe55203a9e8c8b64c47b50685eff
      size: 7797
    outs:
    - path: artifacts/DenseNet121/data_ingestion/dataset-resized
      hash: md5
      md5: e05c7d7859046b1f3259a43d7918f7ac.dir
      size: 43288550
      nfiles: 2528
  data_preprocessing:
    cmd: python trashnet/pipeline/training_pipeline.py data_preprocessing
    deps:
    - path: artifacts/DenseNet121/data_ingestion/dataset-resized
      hash: md5
      md5: e05c7d7859046b1f3259a43d7918f7ac.dir
      size: 43288550
      nfiles: 2528
    - path: config.yaml
      hash: md5
      md5: 583b467daa92c4d360de508a4bba1336
      size: 2125
    - path: trashnet/pipeline/training_pipeline.py
      hash: md5
      md5: 62c8fe55203a9e8c8b64c47b50685eff
      size: 7797
    params:
      params.yaml:
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        LABEL_LIST:
        - cardboard
        - glass
        - metal
        - paper
        - plastic
        - trash
        SEED: 42
        SPLIT_RATIO:
        - 0.9
        - 0.1
    outs:
    - path: artifacts/DenseNet121/data_preprocessing/objects/class_weights.pkl
      hash: md5
      md5: 5856215113456e17b0552370972811b9
      size: 227
    - path: artifacts/DenseNet121/data_preprocessing/objects/label_list.pkl
      hash: md5
      md5: ab4a904a2c99dfffe30ae40b45089122
      size: 472
    - path: artifacts/DenseNet121/data_preprocessing/tfrecords/train_trashnet.tfrecord
      hash: md5
      md5: bc33a4e53e2c0579177724bd67d773be.dir
      size: 311019285
      nfiles: 3
    - path: artifacts/DenseNet121/data_preprocessing/tfrecords/valid_trashnet.tfrecord
      hash: md5
      md5: fb0f1112a8feae1524f1715e32f47796.dir
      size: 33519910
      nfiles: 3
  model_training_and_evaluation:
    cmd: python trashnet/pipeline/training_pipeline.py model_training_and_evaluation
    deps:
    - path: artifacts/DenseNet121/data_preprocessing/objects/class_weights.pkl
      hash: md5
      md5: 5856215113456e17b0552370972811b9
      size: 227
    - path: artifacts/DenseNet121/data_preprocessing/objects/label_list.pkl
      hash: md5
      md5: ab4a904a2c99dfffe30ae40b45089122
      size: 472
    - path: artifacts/DenseNet121/data_preprocessing/tfrecords/train_trashnet.tfrecord
      hash: md5
      md5: bc33a4e53e2c0579177724bd67d773be.dir
      size: 311019285
      nfiles: 3
    - path: artifacts/DenseNet121/data_preprocessing/tfrecords/valid_trashnet.tfrecord
      hash: md5
      md5: fb0f1112a8feae1524f1715e32f47796.dir
      size: 33519910
      nfiles: 3
    - path: config.yaml
      hash: md5
      md5: 583b467daa92c4d360de508a4bba1336
      size: 2125
    - path: trashnet/pipeline/training_pipeline.py
      hash: md5
      md5: 62c8fe55203a9e8c8b64c47b50685eff
      size: 7797
    params:
      params.yaml:
        BATCH_SIZE: 16
        EPOCHS: 1
        LEARNING_RATE: 0.001
        LOSS_FUNCTION: sparse_categorical_crossentropy
        METRICS:
        - accuracy
    outs:
    - path: artifacts/DenseNet121/results/model/best_model.keras
      hash: md5
      md5: 739fbf25e781d14506edb14b24a10ead
      size: 29737457
    - path: artifacts/DenseNet121/results/reports/classification_report.txt
      hash: md5
      md5: 05eb9aedd6073dbf03772b5044affc60
      size: 554
    - path: artifacts/DenseNet121/results/reports/confusion_matrix_plot.png
      hash: md5
      md5: e998d6d9117f4c5f783c639cb2785f41
      size: 58646
    - path: artifacts/DenseNet121/results/reports/epoch_tabel.csv
      hash: md5
      md5: f604aa68b3dd4de101dc460ad3054f36
      size: 92
    - path: artifacts/DenseNet121/results/reports/training_plot.png
      hash: md5
      md5: 3e966e439da6f8a7d83ba7c2b66ded60
      size: 33474
    - path: artifacts/DenseNet121/results/reports/training_tabel.csv
      hash: md5
      md5: b190d34e45c2c1e1333ef411c31786f1
      size: 65
  model_pusher:
    cmd: python trashnet/pipeline/training_pipeline.py model_pusher
    deps:
    - path: artifacts/DenseNet121/results/model/best_model.keras
      hash: md5
      md5: 739fbf25e781d14506edb14b24a10ead
      size: 29737457
    - path: config.yaml
      hash: md5
      md5: 583b467daa92c4d360de508a4bba1336
      size: 2125
    - path: trashnet/pipeline/training_pipeline.py
      hash: md5
      md5: 62c8fe55203a9e8c8b64c47b50685eff
      size: 7797
